(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3adca8"],{"12d1":function(t,e,i){},"49b9":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("van-nav-bar",{attrs:{title:"","left-arrow":"","left-text":"上传头像","right-text":"提交"},on:{"click-left":t.onClickLeft,"click-right":t.submit}})],1),i("div",{staticStyle:{"text-align":"center","margin-top":"50px"}},[i("van-uploader",{attrs:{multiple:"","max-count":1},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),i("br"),i("br"),i("span",{staticClass:"font"},[t._v("选择一个好看的头像吧！")])],1)])},a=[],o=i("2b0e"),s=i("bc3a"),r=i.n(s),l=i("8f80"),c=i("6b41"),u=i("b650"),h=i("f564");o["default"].use(h["a"]),o["default"].use(u["a"]),o["default"].use(c["a"]),o["default"].use(l["a"]);var f={name:"IconRevise",data:function(){return{fileList:[],photo:""}},methods:{afterRead:function(t){this.photo=t.content},onClickLeft:function(){window.history.go(-1)},submit:function(){r.a.post("url",{icon:this.photo}).then((function(t){console.log(t),Object(h["a"])("上传成功"),window.history.go(-1)})).catch((function(t){console.log(t)}))}}},d=f,v=(i("ab92"),i("2877")),p=Object(v["a"])(d,n,a,!1,null,"3b76c5c9",null);e["default"]=p.exports},"6b41":function(t,e,i){"use strict";var n=i("2638"),a=i.n(n),o=i("d282"),s=i("a142"),r=i("ba31"),l=i("b1d2"),c=i("ad06"),u=Object(o["a"])("nav-bar"),h=u[0],f=u[1];function d(t,e,i,n){var o;return t("div",a()([{class:[f({fixed:e.fixed}),(o={},o[l["a"]]=e.border,o)],style:{zIndex:e.zIndex}},Object(r["b"])(n)]),[t("div",{class:f("left"),on:{click:n.listeners["click-left"]||s["e"]}},[i.left?i.left():[e.leftArrow&&t(c["a"],{class:f("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:f("text")},[e.leftText])]]),t("div",{class:[f("title"),"van-ellipsis"]},[i.title?i.title():e.title]),t("div",{class:f("right"),on:{click:n.listeners["click-right"]||s["e"]}},[i.right?i.right():e.rightText&&t("span",{class:f("text")},[e.rightText])])])}d.props={title:String,fixed:Boolean,leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0},zIndex:{type:Number,default:1}},e["a"]=h(d)},"8f80":function(t,e,i){"use strict";var n=i("c31d"),a=i("d282"),o=i("ea8e"),s=i("a142");function r(t){return Array.isArray(t)?t:[t]}function l(t,e){return new Promise((function(i){if("file"!==e){var n=new FileReader;n.onload=function(t){i(t.target.result)},"dataUrl"===e?n.readAsDataURL(t):"text"===e&&n.readAsText(t)}else i()}))}function c(t,e){return r(t).some((function(t){return t.size>e}))}var u=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function h(t){return u.test(t)}function f(t){return!!t.isImage||(t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?h(t.url):!!t.content&&0===t.content.indexOf("data:image"))}var d=i("ad06"),v=i("44bf"),p=i("2b0e"),m=i("482d"),g=i("1325"),b=i("6605"),w=i("3875"),y=i("543e"),x=i("5596"),S=i("2bb1"),O=Object(a["a"])("image-preview"),C=O[0],I=O[1];function T(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var k,j=C({mixins:[b["a"],w["a"]],props:{className:null,lazyLoad:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},swipeDuration:{type:Number,default:500},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},startPosition:{type:Number,default:0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:I("overlay")}},data:function(){return{scale:1,moveX:0,moveY:0,active:0,moving:!1,zooming:!1,doubleClickTimer:null}},computed:{imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};return 1!==t&&(e.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),e}},watch:{value:function(){this.setActive(this.startPosition)},startPosition:function(t){this.setActive(t)}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){var e=this;Object(g["c"])(t);var i=new Date-this.touchStartTime,n=this.$refs.swipe||{},a=n.offsetX,o=void 0===a?0:a,s=n.offsetY,r=void 0===s?0:s;i<300&&o<10&&r<10&&(this.doubleClickTimer?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,this.toggleScale()):this.doubleClickTimer=setTimeout((function(){var t=e.active;e.$emit("close",{index:t,url:e.images[t]}),e.asyncClose||e.$emit("input",!1),e.doubleClickTimer=null}),300))},startMove:function(t){var e=t.currentTarget,i=e.getBoundingClientRect(),n=window.innerWidth,a=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(i.width-n)/2),this.maxMoveY=Math.max(0,(i.height-a)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=T(t.touches)},onImageTouchStart:function(t){var e=t.touches,i=this.$refs.swipe||{},n=i.offsetX,a=void 0===n?0:n;1===e.length&&1!==this.scale?this.startMove(t):2!==e.length||a||this.startZoom(t)},onImageTouchMove:function(t){var e=t.touches;if((this.moving||this.zooming)&&Object(g["c"])(t,!0),this.moving){this.touchMove(t);var i=this.deltaX+this.startMoveX,n=this.deltaY+this.startMoveY;this.moveX=Object(m["a"])(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(m["a"])(n,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var a=T(e),o=this.startScale*a/this.startDistance;this.scale=Object(m["a"])(o,this.minZoom,this.maxZoom)}},onImageTouchEnd:function(t){if(this.moving||this.zooming){var e=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),e&&Object(g["c"])(t,!0)}},setActive:function(t){this.resetScale(),t!==this.active&&(this.active=t,this.$emit("change",t))},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0},toggleScale:function(){var t=this.scale>1?1:2;this.scale=t,this.moveX=0,this.moveY=0},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:I("index")},[this.slots("index")||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:I("cover")},[e])},genImages:function(){var t=this,e=this.$createElement,i={loading:function(){return e(y["a"],{attrs:{type:"spinner"}})}};return e(x["a"],{ref:"swipe",attrs:{loop:this.loop,indicatorColor:"white",duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators},class:I("swipe"),on:{change:this.setActive},nativeOn:{touchstart:this.onWrapperTouchStart,touchMove:g["c"],touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[this.images.map((function(n,a){return e(S["a"],[e(v["a"],{attrs:{src:n,fit:"contain",lazyLoad:t.lazyLoad},class:I("image"),scopedSlots:i,style:a===t.active?t.imageStyle:null,nativeOn:{touchstart:t.onImageTouchStart,touchmove:t.onImageTouchMove,touchend:t.onImageTouchEnd,touchcancel:t.onImageTouchEnd}})])}))])}},render:function(){var t=arguments[0];if(this.value)return t("transition",{attrs:{name:"van-fade"}},[t("div",{class:[I(),this.className]},[this.genImages(),this.genIndex(),this.genCover()])])}}),z={loop:!0,images:[],value:!0,minZoom:1/3,maxZoom:3,className:"",onClose:null,onChange:null,lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,swipeDuration:500,showIndicators:!1,closeOnPopstate:!1},M=function(){k=new(p["default"].extend(j))({el:document.createElement("div")}),document.body.appendChild(k.$el),k.$on("change",(function(t){k.onChange&&k.onChange(t)}))},A=function(t,e){if(void 0===e&&(e=0),!s["d"]){k||M();var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(n["a"])(k,z,i),k.$once("input",(function(t){k.value=t})),i.onClose&&k.$once("close",i.onClose),k}};A.install=function(){p["default"].use(j)};var $=A,L=Object(a["a"])("uploader"),D=L[0],P=L[1];e["a"]=D({inheritAttrs:!1,model:{prop:"fileList"},props:{disabled:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:Number,default:Number.MAX_VALUE},maxCount:{type:Number,default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"}},computed:{previewSizeWithUnit:function(){return Object(o["a"])(this.previewSize)}},methods:{getDetail:function(t){return void 0===t&&(t=this.fileList.length),{name:this.name,index:t}},onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var n=this.beforeRead(i,this.getDetail());if(!n)return void this.resetInput();if(n.then)return void n.then((function(){e.readFile(i)})).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=c(t,this.maxSize);if(Array.isArray(t)){var n=this.maxCount-this.fileList.length;t.length>n&&(t=t.slice(0,n)),Promise.all(t.map((function(t){return l(t,e.resultType)}))).then((function(n){var a=t.map((function(t,e){var i={file:t};return n[e]&&(i.content=n[e]),i}));e.onAfterRead(a,i)}))}else l(t,this.resultType).then((function(n){var a={file:t};n&&(a.content=n),e.onAfterRead(a,i)}))},onAfterRead:function(t,e){e?this.$emit("oversize",t,this.getDetail()):(this.resetInput(),this.$emit("input",[].concat(this.fileList,r(t))),this.afterRead&&this.afterRead(t,this.getDetail()))},onDelete:function(t,e){var i=this;if(this.beforeDelete){var n=this.beforeDelete(t,this.getDetail(e));if(!n)return;if(n.then)return void n.then((function(){i.deleteFile(t,e)})).catch(s["e"])}this.deleteFile(t,e)},deleteFile:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t,this.getDetail(e))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onPreviewImage:function(t){var e=this;if(this.previewFullImage){var i=this.fileList.filter((function(t){return f(t)})),n=i.map((function(t){return t.content||t.url}));this.imagePreview=$({images:n,closeOnPopstate:!0,startPosition:i.indexOf(t),onClose:function(){e.$emit("close-preview")}})}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},genPreviewItem:function(t,e){var i=this,n=this.$createElement,a=this.deletable&&n(d["a"],{attrs:{name:"clear"},class:P("preview-delete"),on:{click:function(n){n.stopPropagation(),i.onDelete(t,e)}}}),o=f(t)?n(v["a"],{attrs:{fit:this.imageFit,src:t.content||t.url,width:this.previewSize,height:this.previewSize,radius:4},class:P("preview-image"),on:{click:function(){i.onPreviewImage(t)}}}):n("div",{class:P("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[n(d["a"],{class:P("file-icon"),attrs:{name:"description"}}),n("div",{class:[P("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url])]);return n("div",{class:P("preview"),on:{click:function(){i.$emit("click-preview",t,i.getDetail(e))}}},[o,a])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var e,i=this.slots(),a=t("input",{attrs:Object(n["a"])({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:P("input"),on:{change:this.onChange}});if(i)return t("div",{class:P("input-wrapper")},[i,a]);if(this.previewSize){var o=this.previewSizeWithUnit;e={width:o,height:o}}return t("div",{class:P("upload"),style:e},[t(d["a"],{attrs:{name:"plus"},class:P("upload-icon")}),this.uploadText&&t("span",{class:P("upload-text")},[this.uploadText]),a])}}},render:function(){var t=arguments[0];return t("div",{class:P()},[t("div",{class:P("wrapper")},[this.genPreviewList(),this.genUpload()])])}})},ab92:function(t,e,i){"use strict";var n=i("12d1"),a=i.n(n);a.a},f564:function(t,e,i){"use strict";var n=i("c31d"),a=i("2b0e"),o=i("2638"),s=i.n(o),r=i("d282"),l=i("b1d2"),c=i("ba31"),u=i("6605"),h=i("a142"),f=i("ad06"),d=Object(r["a"])("popup"),v=d[0],p=d[1],m=v({mixins:[u["a"]],props:{round:Boolean,duration:Number,closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,a=this.duration,o=this.transition||("center"===n?"van-fade":"van-popup-slide-"+n),s={};return Object(h["b"])(a)&&(s.transitionDuration=a+"s"),e("transition",{attrs:{name:o},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:s,class:p((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(f["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:p("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}}),g=Object(r["a"])("notify"),b=g[0],w=g[1];function y(t,e,i,n){var a={color:e.color,background:e.background};return t(m,s()([{attrs:{value:e.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:a,class:[w([e.type]),e.className]},Object(c["b"])(n,!0)]),[e.message])}y.props=Object(n["a"])({},u["a"].props,{background:String,className:null,message:[Number,String],getContainer:[String,Function],type:{type:String,default:"danger"},color:{type:String,default:l["f"]},duration:{type:Number,default:3e3}});var x,S,O=b(y);function C(t){return Object(h["c"])(t)?t:{message:t}}function I(t){if(!h["d"])return S||(S=Object(c["c"])(O,{on:{click:function(t){S.onClick&&S.onClick(t)},close:function(){S.onClose&&S.onClose()},opened:function(){S.onOpened&&S.onOpened()}}})),t=Object(n["a"])({},I.currentOptions,{},C(t)),Object(n["a"])(S,t),clearTimeout(x),t.duration&&t.duration>0&&(x=setTimeout(I.clear,t.duration)),S}function T(){return{type:"danger",value:!0,message:"",color:l["f"],background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}I.clear=function(){S&&(S.value=!1)},I.currentOptions=T(),I.setDefaultOptions=function(t){Object(n["a"])(I.currentOptions,t)},I.resetDefaultOptions=function(){I.currentOptions=T()},I.install=function(){a["default"].use(O)},a["default"].prototype.$notify=I;e["a"]=I}}]);
//# sourceMappingURL=chunk-3b3adca8.8cb0a8ae.js.map