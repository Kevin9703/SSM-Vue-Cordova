{"version":3,"sources":["webpack:///./src/views/test.vue?a512","webpack:///src/views/test.vue","webpack:///./src/views/test.vue?5f02","webpack:///./src/views/test.vue","webpack:///./node_modules/vant/es/pull-refresh/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","onRefresh","model","value","callback","$$v","isLoading","expression","_v","_s","count","staticRenderFns","component","_createNamespace","createComponent","bem","t","TEXT_STATUS","mixins","props","disabled","Boolean","successText","String","pullingText","loosingText","loadingText","type","required","successDuration","Number","default","animationDuration","headHeight","data","status","distance","duration","computed","untouchable","watch","loading","_this","setTimeout","setStatus","mounted","scrollEl","$el","methods","onTouchStart","event","getCeiling","touchStart","onTouchMove","touchMove","ceiling","startY","touches","clientY","deltaY","direction","ease","onTouchEnd","_this2","$emit","$nextTick","Math","round","h","arguments","text","style","transitionDuration","transform","Status","slots","indexOf"],"mappings":"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","file":"js/chunk-680d58dc.a56b7b28.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('p',[_vm._v(\"刷新次数: \"+_vm._s(_vm.count))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-pull-refresh\r\n      v-model=\"isLoading\"\r\n      @refresh=\"onRefresh\"\r\n    >\r\n      <p>刷新次数: {{ count }}</p>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue';\r\nimport { PullRefresh } from 'vant';\r\n\r\nVue.use(PullRefresh);\r\n    export default {\r\n        name: 'Test',\r\n        data() {\r\n            return {\r\n                count: 0,\r\n                isLoading: false\r\n            }\r\n        },\r\n        methods: {\r\n            onRefresh() {\r\n                setTimeout(() => {\r\n                    this.$toast('刷新成功');\r\n                    this.isLoading = false;\r\n                    this.count++;\r\n                }, 500);\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"\" scoped>\r\n    \r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./test.vue?vue&type=template&id=3e3bbd32&scoped=true&\"\nimport script from \"./test.vue?vue&type=script&lang=js&\"\nexport * from \"./test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e3bbd32\",\n  null\n  \n)\n\nexport default component.exports","import { createNamespace } from '../utils';\nimport { preventDefault } from '../utils/dom/event';\nimport { TouchMixin } from '../mixins/touch';\nimport { getScrollTop, getScrollEventTarget } from '../utils/dom/scroll';\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('pull-refresh'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nvar TEXT_STATUS = ['pulling', 'loosing', 'success'];\nexport default createComponent({\n  mixins: [TouchMixin],\n  props: {\n    disabled: Boolean,\n    successText: String,\n    pullingText: String,\n    loosingText: String,\n    loadingText: String,\n    value: {\n      type: Boolean,\n      required: true\n    },\n    successDuration: {\n      type: Number,\n      default: 500\n    },\n    animationDuration: {\n      type: Number,\n      default: 300\n    },\n    headHeight: {\n      type: Number,\n      default: 50\n    }\n  },\n  data: function data() {\n    return {\n      status: 'normal',\n      distance: 0,\n      duration: 0\n    };\n  },\n  computed: {\n    untouchable: function untouchable() {\n      return this.status === 'loading' || this.status === 'success' || this.disabled;\n    }\n  },\n  watch: {\n    value: function value(loading) {\n      var _this = this;\n\n      this.duration = this.animationDuration;\n\n      if (!loading && this.successText) {\n        this.status = 'success';\n        setTimeout(function () {\n          _this.setStatus(0);\n        }, this.successDuration);\n      } else {\n        this.setStatus(loading ? this.headHeight : 0, loading);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.scrollEl = getScrollEventTarget(this.$el);\n  },\n  methods: {\n    onTouchStart: function onTouchStart(event) {\n      if (!this.untouchable && this.getCeiling()) {\n        this.duration = 0;\n        this.touchStart(event);\n      }\n    },\n    onTouchMove: function onTouchMove(event) {\n      if (this.untouchable) {\n        return;\n      }\n\n      this.touchMove(event);\n\n      if (!this.ceiling && this.getCeiling()) {\n        this.duration = 0;\n        this.startY = event.touches[0].clientY;\n        this.deltaY = 0;\n      }\n\n      if (this.ceiling && this.deltaY >= 0) {\n        if (this.direction === 'vertical') {\n          this.setStatus(this.ease(this.deltaY));\n          preventDefault(event);\n        }\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      var _this2 = this;\n\n      if (!this.untouchable && this.ceiling && this.deltaY) {\n        this.duration = this.animationDuration;\n\n        if (this.status === 'loosing') {\n          this.setStatus(this.headHeight, true);\n          this.$emit('input', true); // ensure value change can be watched\n\n          this.$nextTick(function () {\n            _this2.$emit('refresh');\n          });\n        } else {\n          this.setStatus(0);\n        }\n      }\n    },\n    getCeiling: function getCeiling() {\n      this.ceiling = getScrollTop(this.scrollEl) === 0;\n      return this.ceiling;\n    },\n    ease: function ease(distance) {\n      var headHeight = this.headHeight;\n      return Math.round(distance < headHeight ? distance : distance < headHeight * 2 ? headHeight + (distance - headHeight) / 2 : headHeight * 1.5 + (distance - headHeight * 2) / 4);\n    },\n    setStatus: function setStatus(distance, isLoading) {\n      this.distance = distance;\n      var status = isLoading ? 'loading' : distance === 0 ? 'normal' : distance < this.headHeight ? 'pulling' : 'loosing';\n\n      if (status !== this.status) {\n        this.status = status;\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var status = this.status,\n        distance = this.distance;\n    var text = this[status + \"Text\"] || t(status);\n    var style = {\n      transitionDuration: this.duration + \"ms\",\n      transform: this.distance ? \"translate3d(0,\" + this.distance + \"px, 0)\" : ''\n    };\n    var Status = this.slots(status, {\n      distance: distance\n    }) || [TEXT_STATUS.indexOf(status) !== -1 && h(\"div\", {\n      \"class\": bem('text')\n    }, [text]), status === 'loading' && h(Loading, {\n      \"attrs\": {\n        \"size\": \"16\"\n      }\n    }, [text])];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"class\": bem('track'),\n      \"style\": style,\n      \"on\": {\n        \"touchstart\": this.onTouchStart,\n        \"touchmove\": this.onTouchMove,\n        \"touchend\": this.onTouchEnd,\n        \"touchcancel\": this.onTouchEnd\n      }\n    }, [h(\"div\", {\n      \"class\": bem('head')\n    }, [Status]), this.slots()])]);\n  }\n});"],"sourceRoot":""}